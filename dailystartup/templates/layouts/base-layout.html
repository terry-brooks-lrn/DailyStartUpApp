{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Learnosity - Application Support Engineering -
            {% block TITLE %}
            {% endblock TITLE %}
        </title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <meta content="" name="keywords" />
        <meta content="" name="description" />
        <meta name="google-signin-client_id"
              content="178586871286-shvnctggc1ket8mfiil6od5p6te8c67g.apps.googleusercontent.com.apps.googleusercontent.com">
        <!-- Favicon -->
        <link href="https://learnosity.b-cdn.net/favicon.ico" rel="icon" />
        <!-- Google Web Fonts -->
        <script src="https://learnosity.b-cdn.net/jquery.js"></script>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
              rel="stylesheet" />
        <!-- Icon Font Stylesheet -->
        <script src="https://kit.fontawesome.com/58e27c88da.js"
                crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
              rel="stylesheet" />
        <!-- Libraries Stylesheet -->
        <link href="{% static 'plugins/css/ace.min.css' %}"
              type="text/css"
              media="all"
              rel="stylesheet" />
        <link href="{% static 'plugins/css/resizable.min.css' %}"
              type="text/css"
              media="all"
              rel="stylesheet" />
        <link href="{% static 'martor/css/martor.bootstrap.min.css' %}"
              type="text/css"
              media="all"
              rel="stylesheet" />
        <link href="https://learnosity.b-cdn.net/owl.carousel.min.css"
              rel="stylesheet" />
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
        <link href="https://learnosity.b-cdn.net/tempusdominus-bootstrap-4.min.css"
              rel="stylesheet" />
        <!-- Customized Bootstrap Stylesheet -->
        <link href="https://learnosity.b-cdn.net/bootstrap.min.css"
              rel="stylesheet" />
        <!-- Template Stylesheet -->
        <link href="https://learnosity.b-cdn.net/style.css" rel="stylesheet" />
        <script>
             {
                  % block CUSTOM_SCRIPTS %
             } {
                  % endblock CUSTOM_SCRIPTS %
             }
        </script>
    </head>
    <body>
        {% block MAIN %}
        {% endblock MAIN %}
        <div id="toast-node"></div>
        <!-- JavaScript Libraries -->
        <script src="https://learnosity.b-cdn.net/jquery.js"></script>
        <script src="https://learnosity.b-cdn.net/easing.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.js"></script>
        <script src="https://learnosity.b-cdn.net/waypoints.min.js"></script>
        <script src="https://learnosity.b-cdn.net/owl.carousel.min.js"></script>
        <script src="https://learnosity.b-cdn.net/moment.min.js"></script>
        <script src="https://learnosity.b-cdn.net/moment-timezone.min.js"></script>
        <script src="https://learnosity.b-cdn.net/tempusdominus-bootstrap-4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js"
                integrity="sha512-Xo0Jh8MsOn72LGV8kU5LsclG7SUzJsWGhXbWcYs2MAmChkQzwiW/yTQwdJ8w6UA9C6EVG18GHb/TrYpYCjyAQw=="
                crossorigin="anonymous"
                referrerpolicy="no-referrer"></script>
        <script type="text/javascript" src="{% static 'plugins/js/ace.js' %}"></script>
        <script type="text/javascript"
                src="{% static 'plugins/js/mode-markdown.js' %}"></script>
        <script type="text/javascript"
                src="{% static 'plugins/js/ext-language_tools.js' %}"></script>
        <script type="text/javascript"
                src="{% static 'plugins/js/theme-github.js' %}"></script>
        <script type="text/javascript" src="{% static 'plugins/js/typo.js' %}"></script>
        <script type="text/javascript" src="{% static 'plugins/js/spellcheck.js' %}"></script>
        <script type="text/javascript"
                src="{% static 'plugins/js/highlight.min.js' %}"></script>
        <script type="text/javascript"
                src="{% static 'plugins/js/resizable.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'plugins/js/emojis.min.js' %}"></script>
        <script type="text/javascript"
                src="{% static 'martor/js/martor.bootstrap.min.js' %}"></script>
        <!-- Template Javascript -->
        <script src="https://learnosity.b-cdn.net/main.js"></script>
        <script>
             function CatchyPhrase(type) {
                  if (type == 'resolve') {
                       const completionText = ['Item Has Been Resolved - Good Work Team!', 'Another One Bites The Dust', 'Done and dusted, Item Busted.', 'Get your tasks done, like a boss!', 'Nothing But Net']
                       return completionText[Math.floor(Math.random() * completionText.length)]

                  } else if (type == 'monitor') {
                       const completionText = ['And Now Our Watch Begins', 'We\'ve got our eyes on you', 'Almost Little One.']
                       return completionText[Math.floor(Math.random() * completionText.length)]

                  }
             };
             var resolvedToast = Toastify({
                  text: CatchyPhrase('resolve'),
                  duration: 1100, //
                  gravity: "bottom", // `top` or `bottom`
                  position: "center", // `left`, `center` or `right`
                  stopOnFocus: true, // Prevents dismissing of toast on hover
                  selector: "toast-node",
                  style: {
                       background: "linear-gradient(to right, #00b09b, #96c93d)",
                  },
                  callback: function() {
                       location.reload()
                  }

             });
             var successfulItemCreation = Toastify({
                  text: "Item Added to the agenda!",
                  duration: 1100, //
                  gravity: "top", // `top` or `bottom`
                  position: "center", // `left`, `center` or `right`
                  stopOnFocus: true, // Prevents dismissing of toast on hover
                  selector: "toast-node",
                  style: {
                       background: "linear-gradient(to right, #7F00FF, #4b0082)",
                  },
                  callback: function() {
                       location.reload()
                  }

             });

             var monitorToast = Toastify({
                  text: CatchyPhrase('monitor'),
                  duration: 1100,
                  gravity: "bottom", // `top` or `bottom`
                  position: "center", // `left`, `center` or `right`
                  stopOnFocus: true, // Prevents dismissing of toast on hover
                  selector: "toast-node",
                  style: {
                       background: "linear-gradient(to right, #FF0000, #000000 )",
                  },
                  callback: function() {
                       location.reload()
                  }

             });


             function showAllItemsLog() {
                  const itemLog = document.getElementById('item-log')

                  if (itemLog.style.display == 'none') {
                       const itemTables = document.querySelectorAll('.item-segmentation')
                       itemTables.forEach(el => el.style.display = "none");
                       itemLog.style.display = 'block'
                  } else if (itemLog.style.display == 'block') {
                       itemLog.style.display = 'none'
                       itemTables.style.display = 'block'
                  }
             }
             //NOTE - Change AJAX urls for production

             function resolveItem(pk) {
                  $.post({
                       url: "http://localhost:8000/solve-item",
                       data: {
                            "pk": pk
                       },
                       success: function() {
                            resolvedToast.showToast()

                       }
                  })
             }

             function moveToMonitoring(pk) {
                  $.post({
                       url: "http://localhost:8000/convert",
                       data: {
                            "pk": pk
                       },
                       success: function() {
                            monitorToast.showToast()
                            location.reload()
                       }
                  })
             }

             function reopenItem(pk) {
                  $.post({
                       url: "http://localhost:8000/reopen",
                       data: {
                            "pk": pk
                       },
                       success: function() {
                            monitorToast.showToast()
                            location.reload()
                       }
                  })
             };
             // Hook to submit the form data from the add ite
             function CreateItem() {
                  var formData = new FormData(document.querySelector('form'))
                  $.post({
                       url: "/api/items",
                       data: formData,
                       success: function() {
                            successfulItemCreation.showToast()
                            location.reload()
                       }

                  })
             }
        </script>
        <script>
             var addNewItemModal = new bootstrap.Modal(document.getElementById('add-item-modal'))
             document.getElementById('add-item-modal').addEventListener('click', showAddItemModal);
             document.getElementById('cancel-add-item').addEventListener('click', showAddItemModal);

             function showAddItemModal() {
                  addNewItemModal.show()
             };


             function closeAddItemModal() {
                  addNewItemModal.dispose()
             }
        </script>
    </body>
</html>
